<!DOCTYPE html>
<html >
<head><meta charset="utf-8">
<title>SpringBoot Thymeleaf Html转Pdf</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="og:title" content="SpringBoot Thymeleaf Html转Pdf">
<meta name="description" content="通过模板引擎将html网页转为pdf">
<meta name="og:description" content="通过模板引擎将html网页转为pdf"><link rel="modulepreload" href="/blank-blog/articles/0005/_payload.js"><link rel="modulepreload" as="script" crossorigin href="/blank-blog/_nuxt/entry.11c2c7bc.js"><link rel="preload" as="style" href="/blank-blog/_nuxt/entry.3638b351.css"><link rel="modulepreload" as="script" crossorigin href="/blank-blog/_nuxt/query.d67b8d24.js"><link rel="modulepreload" as="script" crossorigin href="/blank-blog/_nuxt/AppNavSearch.327fd0f2.js"><link rel="modulepreload" as="script" crossorigin href="/blank-blog/_nuxt/AppSidebar.8a397fa0.js"><link rel="modulepreload" as="script" crossorigin href="/blank-blog/_nuxt/_...slug_.f10337fc.js"><link rel="modulepreload" as="script" crossorigin href="/blank-blog/_nuxt/ContentDoc.faef5b28.js"><link rel="modulepreload" as="script" crossorigin href="/blank-blog/_nuxt/composables.26d5fdb4.js"><link rel="modulepreload" as="script" crossorigin href="/blank-blog/_nuxt/ContentRenderer.f9f20a3e.js"><link rel="modulepreload" as="script" crossorigin href="/blank-blog/_nuxt/ContentRendererMarkdown.b58f01b7.js"><link rel="modulepreload" as="script" crossorigin href="/blank-blog/_nuxt/index.a6ef77ff.js"><link rel="modulepreload" as="script" crossorigin href="/blank-blog/_nuxt/ContentQuery.ae8ff20f.js"><link rel="modulepreload" as="script" crossorigin href="/blank-blog/_nuxt/ProseH1.2c5614c1.js"><link rel="modulepreload" as="script" crossorigin href="/blank-blog/_nuxt/ProseH2.6ae363b9.js"><link rel="modulepreload" as="script" crossorigin href="/blank-blog/_nuxt/ProseP.b5b56fa7.js"><link rel="modulepreload" as="script" crossorigin href="/blank-blog/_nuxt/ProseCode.ef8fc51b.js"><link rel="modulepreload" as="script" crossorigin href="/blank-blog/_nuxt/ProseH4.3bc1ad69.js"><link rel="modulepreload" as="script" crossorigin href="/blank-blog/_nuxt/ProseStrong.c45690af.js"><link rel="modulepreload" as="script" crossorigin href="/blank-blog/_nuxt/ProseImg.acced2af.js"><link rel="prefetch" as="image" type="image/png" href="/blank-blog/_nuxt/logo.a48fd503.png"><link rel="prefetch" as="script" crossorigin href="/blank-blog/_nuxt/client-db.3df9030e.js"><link rel="prefetch" as="script" crossorigin href="/blank-blog/_nuxt/error-component.f40b7cf8.js"><link rel="stylesheet" href="/blank-blog/_nuxt/entry.3638b351.css"><style>*{margin:0;padding:0}body{background-color:#f3f3f3}div.app-container{display:flex;justify-content:center}.app-sidebar{margin:20px 20px 0 0}main{margin-bottom:20px;margin-top:20px;min-height:calc(100vh - 60px);width:800px}</style><style>header{align-items:center;background-color:#fff;display:flex;height:60px;justify-content:center}</style><style>.app-nav-search{color:rgba(40,40,40,.6);cursor:pointer;font-size:20px;font-weight:600;height:38px;left:476px;line-height:38px;text-align:center;top:11px;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:400px}.app-nav-search,.app-nav-search-dialog{background-color:#f3f3f3;border-radius:10px}.app-nav-search-dialog{box-sizing:border-box;display:flex;flex-direction:column;justify-content:center;left:calc(50% - 220px);padding:20px;position:fixed;top:100px;z-index:100}.app-nav-search-dialog input{border:none;border-radius:10px;box-sizing:border-box;color:rgba(40,40,40,.8);font-size:20px;font-weight:600;height:40px;padding:0 10px;width:400px}.app-nav-search-dialog .search-article-list{list-style:none}.app-nav-search-dialog .search-article-list>:first-child{margin-top:16px}.app-nav-search-dialog .search-article-list .search-article-item{padding:5px 0}.app-nav-search-dialog .search-article-list .search-article-item,.app-nav-search-dialog .search-article-list .search-article-item>a{color:rgba(40,40,40,.8);font-size:20px;font-weight:600}.app-nav-search-mask{background-color:rgba(40,40,40,.8);height:100vh;left:0;position:fixed;top:0;width:100vw}</style><style>.app-sidebar{width:280px}.app-sidebar .sidebar-block{background-color:#fff;border-radius:10px;box-sizing:border-box;color:rgba(40,40,40,.8);font-size:16px;font-weight:600;margin-bottom:20px;padding:20px;text-align:center;width:100%}.app-sidebar .go-back{cursor:pointer;text-decoration:underline}.app-sidebar>.user-block .my{align-items:center;display:flex;justify-content:space-evenly;margin-bottom:20px}.app-sidebar>.user-block .my img{height:56px;width:56px}.app-sidebar>.user-block .my div{text-align:center}.app-sidebar>.user-block .my div h3{color:#282828;font-size:20px;font-weight:600}.app-sidebar>.user-block .my div h5{color:rgba(40,40,40,.6);font-size:14px;font-weight:400}.app-sidebar>.user-block .links{display:flex;justify-content:space-evenly;list-style:none}.app-sidebar>.user-block .links .link{color:rgba(40,40,40,.6);font-size:14px;font-weight:400;text-decoration-line:underline}.app-sidebar>.tag-block h2{color:#282828;font-size:20px;font-weight:600;text-align:center}.app-sidebar>.tag-block .tags{display:flex;flex-wrap:wrap;list-style:none}.app-sidebar>.tag-block .tags .tag{color:rgba(40,40,40,.6);font-size:14px;font-weight:400;line-height:24px;margin-right:10px;text-decoration-line:underline}</style><style>.article-container{background-color:#fff;border-radius:10px;box-sizing:border-box;padding:10px}</style><style>pre code .line{display:block;min-height:1rem}</style></head>
<body ><div id="__nuxt"><!--[--><header class="app-nav"><div><div class="app-nav-search">搜索</div><!----><!----></div></header><div class="app-container"><aside class="app-sidebar"><section style="padding-top:10px;padding-bottom:10px;" class="sidebar-block"><span class="go-back">返回上一页</span></section><section class="user-block sidebar-block"><div class="my"><img src="/blank-blog/_nuxt/logo.a48fd503.png" alt="logo"><div><h3>嘎嘣脆</h3><h5>“努力，奋斗”</h5></div></div><ul class="links"><!--[--><li class="link">邮箱</li><li class="link">GitHub</li><li class="link">BiliBili</li><!--]--></ul></section><section class="tag-block sidebar-block"><h2>标签</h2><ul class="tags"><!--[--><li class="tag">#JavaScript(20)</li><li class="tag">#SpringBoot(2)</li><li class="tag">#NuxtJs(6)</li><li class="tag">#Mysql(4)</li><li class="tag">#Java(9)</li><li class="tag">#Flutter(10)</li><!--]--></ul></section></aside><main><!--[--><div class="article-container"><!--[--><div><h1 id="新建项目"><!--[-->新建项目<!--]--></h1><h2 id="说明"><a href="#说明"><!--[-->说明<!--]--></a></h2><p><!--[-->用 itextpdf 写 pdf，样式实在是太折磨了，这里选用 Thymeleaf 模板生成 html 转 pdf，html+css 写样式排版好太多了。<!--]--></p><h2 id="引入依赖"><a href="#引入依赖"><!--[-->引入依赖<!--]--></a></h2><!--[--><pre><code><span class="line"><span class="ct-e8330a">&lt;!--html转pdf--&gt;</span></span><span class="line"><span class="ct-11c0fd">&lt;</span><span class="ct-ec55a6">dependency</span><span class="ct-11c0fd">&gt;</span></span><span class="line"><span class="ct-b4240c">    </span><span class="ct-11c0fd">&lt;</span><span class="ct-ec55a6">groupId</span><span class="ct-11c0fd">&gt;</span><span class="ct-b4240c">com.itextpdf</span><span class="ct-11c0fd">&lt;/</span><span class="ct-ec55a6">groupId</span><span class="ct-11c0fd">&gt;</span></span><span class="line"><span class="ct-b4240c">    </span><span class="ct-11c0fd">&lt;</span><span class="ct-ec55a6">artifactId</span><span class="ct-11c0fd">&gt;</span><span class="ct-b4240c">html2pdf</span><span class="ct-11c0fd">&lt;/</span><span class="ct-ec55a6">artifactId</span><span class="ct-11c0fd">&gt;</span></span><span class="line"><span class="ct-b4240c">    </span><span class="ct-11c0fd">&lt;</span><span class="ct-ec55a6">version</span><span class="ct-11c0fd">&gt;</span><span class="ct-b4240c">4.0.2</span><span class="ct-11c0fd">&lt;/</span><span class="ct-ec55a6">version</span><span class="ct-11c0fd">&gt;</span></span><span class="line"><span class="ct-11c0fd">&lt;/</span><span class="ct-ec55a6">dependency</span><span class="ct-11c0fd">&gt;</span></span></code></pre><!--]--><h2 id="配置-thymeleaf"><a href="#配置-thymeleaf"><!--[-->配置 Thymeleaf<!--]--></a></h2><h4 id="applicationyml"><a href="#applicationyml"><!--[-->application.yml<!--]--></a></h4><!--[--><pre><code><span class="line"><span class="ct-ec55a6">spring</span><span class="ct-b4240c">:</span></span><span class="line"><span class="ct-b4240c">    </span><span class="ct-ec55a6">thymeleaf</span><span class="ct-b4240c">:</span></span><span class="line"><span class="ct-b4240c">        </span><span class="ct-ec55a6">cache</span><span class="ct-b4240c">: </span><span class="ct-ec55a6">false</span></span><span class="line"><span class="ct-b4240c">        </span><span class="ct-ec55a6">prefix</span><span class="ct-b4240c">: </span><span class="ct-1a6128">classpath:/templates/</span></span><span class="line"><span class="ct-b4240c">        </span><span class="ct-ec55a6">suffix</span><span class="ct-b4240c">: </span><span class="ct-1a6128">.html</span></span><span class="line"><span class="ct-b4240c">        </span><span class="ct-ec55a6">mode</span><span class="ct-b4240c">: </span><span class="ct-1a6128">HTML</span></span><span class="line"><span class="ct-b4240c">        </span><span class="ct-ec55a6">encoding</span><span class="ct-b4240c">: </span><span class="ct-1a6128">UTF-8</span></span></code></pre><!--]--><h2 id="创建字体目录以及-pdf-模板"><a href="#创建字体目录以及-pdf-模板"><!--[-->创建字体目录以及 Pdf 模板<!--]--></a></h2><h4 id="创建以下文件"><a href="#创建以下文件"><!--[-->创建以下文件<!--]--></a></h4><p><!--[--><strong><!--[-->src/main/resources/font/cn.ttf<!--]--></strong> *(cn.ttf 必须是中文字体)
<strong><!--[-->src/main/resources/templates/pdf.html<!--]--></strong><!--]--></p><h4 id="pdfhtml"><a href="#pdfhtml"><!--[-->pdf.html<!--]--></a></h4><!--[--><pre><code><span class="line"><span class="ct-11c0fd">&lt;!</span><span class="ct-ec55a6">DOCTYPE</span><span class="ct-b4240c"> </span><span class="ct-2b0fdd">html</span><span class="ct-11c0fd">&gt;</span></span><span class="line"><span class="ct-11c0fd">&lt;</span><span class="ct-ec55a6">html</span><span class="ct-b4240c"> </span><span class="ct-2b0fdd">lang</span><span class="ct-b4240c">=</span><span class="ct-1a6128">&quot;en&quot;</span><span class="ct-b4240c"> </span><span class="ct-2b0fdd">xmlns:th</span><span class="ct-b4240c">=</span><span class="ct-1a6128">&quot;http://www.thymeleaf.org&quot;</span><span class="ct-11c0fd">&gt;</span></span><span class="line"><span class="ct-b4240c">    </span><span class="ct-11c0fd">&lt;</span><span class="ct-ec55a6">head</span><span class="ct-11c0fd">&gt;</span></span><span class="line"><span class="ct-b4240c">        </span><span class="ct-11c0fd">&lt;</span><span class="ct-ec55a6">meta</span><span class="ct-b4240c"> </span><span class="ct-2b0fdd">charset</span><span class="ct-b4240c">=</span><span class="ct-1a6128">&quot;UTF-8&quot;</span><span class="ct-b4240c"> </span><span class="ct-11c0fd">/&gt;</span></span><span class="line"><span class="ct-b4240c">        </span><span class="ct-11c0fd">&lt;</span><span class="ct-ec55a6">title</span><span class="ct-11c0fd">&gt;</span><span class="ct-b4240c">Title</span><span class="ct-11c0fd">&lt;/</span><span class="ct-ec55a6">title</span><span class="ct-11c0fd">&gt;</span></span><span class="line"><span class="ct-b4240c">        </span><span class="ct-11c0fd">&lt;</span><span class="ct-ec55a6">style</span><span class="ct-11c0fd">&gt;</span></span><span class="line"><span class="ct-b4240c">            </span><span class="ct-10739a">body</span><span class="ct-b4240c"> {</span></span><span class="line"><span class="ct-b4240c">                </span><span class="ct-2b0fdd">font-family</span><span class="ct-b4240c">: </span><span class="ct-1a6128">&#39;Microsoft YaHei UI&#39;</span><span class="ct-b4240c">;</span></span><span class="line"><span class="ct-b4240c">            }</span></span><span class="line"><span class="ct-b4240c">        </span><span class="ct-11c0fd">&lt;/</span><span class="ct-ec55a6">style</span><span class="ct-11c0fd">&gt;</span></span><span class="line"><span class="ct-b4240c">    </span><span class="ct-11c0fd">&lt;/</span><span class="ct-ec55a6">head</span><span class="ct-11c0fd">&gt;</span></span><span class="line"><span class="ct-b4240c">    </span><span class="ct-11c0fd">&lt;</span><span class="ct-ec55a6">body</span><span class="ct-11c0fd">&gt;</span></span><span class="line"><span class="ct-b4240c">        </span><span class="ct-11c0fd">&lt;</span><span class="ct-ec55a6">h1</span><span class="ct-11c0fd">&gt;</span><span class="ct-b4240c">检测报告</span><span class="ct-11c0fd">&lt;/</span><span class="ct-ec55a6">h1</span><span class="ct-11c0fd">&gt;</span></span><span class="line"><span class="ct-b4240c">        </span><span class="ct-11c0fd">&lt;</span><span class="ct-ec55a6">div</span><span class="ct-11c0fd">&gt;</span></span><span class="line"><span class="ct-b4240c">            </span><span class="ct-11c0fd">&lt;</span><span class="ct-ec55a6">p</span><span class="ct-11c0fd">&gt;</span></span><span class="line"><span class="ct-b4240c">                </span><span class="ct-11c0fd">&lt;</span><span class="ct-ec55a6">span</span><span class="ct-11c0fd">&gt;</span><span class="ct-b4240c">ID:</span><span class="ct-11c0fd">&lt;/</span><span class="ct-ec55a6">span</span><span class="ct-11c0fd">&gt;</span></span><span class="line"><span class="ct-b4240c">                </span><span class="ct-11c0fd">&lt;</span><span class="ct-ec55a6">span</span><span class="ct-11c0fd">&gt;</span><span class="ct-b4240c">007</span><span class="ct-11c0fd">&lt;/</span><span class="ct-ec55a6">span</span><span class="ct-11c0fd">&gt;</span></span><span class="line"><span class="ct-b4240c">            </span><span class="ct-11c0fd">&lt;/</span><span class="ct-ec55a6">p</span><span class="ct-11c0fd">&gt;</span></span><span class="line"><span class="ct-b4240c">            </span><span class="ct-11c0fd">&lt;</span><span class="ct-ec55a6">p</span><span class="ct-11c0fd">&gt;</span></span><span class="line"><span class="ct-b4240c">                </span><span class="ct-11c0fd">&lt;</span><span class="ct-ec55a6">span</span><span class="ct-11c0fd">&gt;</span><span class="ct-b4240c">来源:</span><span class="ct-11c0fd">&lt;/</span><span class="ct-ec55a6">span</span><span class="ct-11c0fd">&gt;</span></span><span class="line"><span class="ct-b4240c">                </span><span class="ct-11c0fd">&lt;</span><span class="ct-ec55a6">span</span><span class="ct-b4240c"> </span><span class="ct-2b0fdd">th:text</span><span class="ct-b4240c">=</span><span class="ct-1a6128">&quot;${sys}&quot;</span><span class="ct-11c0fd">&gt;&lt;/</span><span class="ct-ec55a6">span</span><span class="ct-11c0fd">&gt;</span></span><span class="line"><span class="ct-b4240c">            </span><span class="ct-11c0fd">&lt;/</span><span class="ct-ec55a6">p</span><span class="ct-11c0fd">&gt;</span></span><span class="line"><span class="ct-b4240c">            </span><span class="ct-11c0fd">&lt;</span><span class="ct-ec55a6">table</span><span class="ct-b4240c"> </span><span class="ct-11b34c">border</span><span class="ct-b4240c">=</span><span class="ct-1a6128">&quot;1&quot;</span><span class="ct-11c0fd">&gt;</span></span><span class="line"><span class="ct-b4240c">                </span><span class="ct-11c0fd">&lt;</span><span class="ct-ec55a6">tr</span><span class="ct-b4240c"> </span><span class="ct-2b0fdd">style</span><span class="ct-b4240c">=</span><span class="ct-1a6128">&quot;background-color: #f6f6f6&quot;</span><span class="ct-11c0fd">&gt;</span></span><span class="line"><span class="ct-b4240c">                    </span><span class="ct-11c0fd">&lt;</span><span class="ct-ec55a6">th</span><span class="ct-11c0fd">&gt;</span><span class="ct-b4240c">id</span><span class="ct-11c0fd">&lt;/</span><span class="ct-ec55a6">th</span><span class="ct-11c0fd">&gt;</span></span><span class="line"><span class="ct-b4240c">                    </span><span class="ct-11c0fd">&lt;</span><span class="ct-ec55a6">th</span><span class="ct-11c0fd">&gt;</span><span class="ct-b4240c">name</span><span class="ct-11c0fd">&lt;/</span><span class="ct-ec55a6">th</span><span class="ct-11c0fd">&gt;</span></span><span class="line"><span class="ct-b4240c">                    </span><span class="ct-11c0fd">&lt;</span><span class="ct-ec55a6">th</span><span class="ct-11c0fd">&gt;</span><span class="ct-b4240c">age</span><span class="ct-11c0fd">&lt;/</span><span class="ct-ec55a6">th</span><span class="ct-11c0fd">&gt;</span></span><span class="line"><span class="ct-b4240c">                </span><span class="ct-11c0fd">&lt;/</span><span class="ct-ec55a6">tr</span><span class="ct-11c0fd">&gt;</span></span><span class="line"><span class="ct-b4240c">                </span><span class="ct-11c0fd">&lt;</span><span class="ct-ec55a6">tr</span><span class="ct-11c0fd">&gt;</span></span><span class="line"><span class="ct-b4240c">                    </span><span class="ct-11c0fd">&lt;</span><span class="ct-ec55a6">td</span><span class="ct-11c0fd">&gt;</span><span class="ct-b4240c">1</span><span class="ct-11c0fd">&lt;/</span><span class="ct-ec55a6">td</span><span class="ct-11c0fd">&gt;</span></span><span class="line"><span class="ct-b4240c">                    </span><span class="ct-11c0fd">&lt;</span><span class="ct-ec55a6">td</span><span class="ct-11c0fd">&gt;</span><span class="ct-b4240c">tom</span><span class="ct-11c0fd">&lt;/</span><span class="ct-ec55a6">td</span><span class="ct-11c0fd">&gt;</span></span><span class="line"><span class="ct-b4240c">                    </span><span class="ct-11c0fd">&lt;</span><span class="ct-ec55a6">td</span><span class="ct-11c0fd">&gt;</span><span class="ct-b4240c">20</span><span class="ct-11c0fd">&lt;/</span><span class="ct-ec55a6">td</span><span class="ct-11c0fd">&gt;</span></span><span class="line"><span class="ct-b4240c">                </span><span class="ct-11c0fd">&lt;/</span><span class="ct-ec55a6">tr</span><span class="ct-11c0fd">&gt;</span></span><span class="line"><span class="ct-b4240c">            </span><span class="ct-11c0fd">&lt;/</span><span class="ct-ec55a6">table</span><span class="ct-11c0fd">&gt;</span></span><span class="line"><span class="ct-b4240c">        </span><span class="ct-11c0fd">&lt;/</span><span class="ct-ec55a6">div</span><span class="ct-11c0fd">&gt;</span></span><span class="line"><span class="ct-b4240c">    </span><span class="ct-11c0fd">&lt;/</span><span class="ct-ec55a6">body</span><span class="ct-11c0fd">&gt;</span></span><span class="line"><span class="ct-11c0fd">&lt;/</span><span class="ct-ec55a6">html</span><span class="ct-11c0fd">&gt;</span></span></code></pre><!--]--><h2 id="创建-controller"><a href="#创建-controller"><!--[-->创建 Controller<!--]--></a></h2><h4 id="testcontrolle"><a href="#testcontrolle"><!--[-->TestControlle<!--]--></a></h4><!--[--><pre><code><span class="line"><span class="ct-ec55a6">package</span><span class="ct-b4240c"> top.yxlhsx.thymeleafdemo;</span></span><span class="line"></span><span class="line"><span class="ct-ec55a6">import</span><span class="ct-b4240c"> com.itextpdf.html2pdf.ConverterProperties;</span></span><span class="line"><span class="ct-ec55a6">import</span><span class="ct-b4240c"> com.itextpdf.html2pdf.HtmlConverter;</span></span><span class="line"><span class="ct-ec55a6">import</span><span class="ct-b4240c"> com.itextpdf.html2pdf.resolver.font.DefaultFontProvider;</span></span><span class="line"><span class="ct-ec55a6">import</span><span class="ct-b4240c"> com.itextpdf.io.font.FontProgram;</span></span><span class="line"><span class="ct-ec55a6">import</span><span class="ct-b4240c"> com.itextpdf.io.font.FontProgramFactory;</span></span><span class="line"><span class="ct-ec55a6">import</span><span class="ct-b4240c"> com.itextpdf.layout.font.FontProvider;</span></span><span class="line"><span class="ct-ec55a6">import</span><span class="ct-b4240c"> org.springframework.stereotype.Controller;</span></span><span class="line"><span class="ct-ec55a6">import</span><span class="ct-b4240c"> org.springframework.ui.Model;</span></span><span class="line"><span class="ct-ec55a6">import</span><span class="ct-b4240c"> org.springframework.util.ObjectUtils;</span></span><span class="line"><span class="ct-ec55a6">import</span><span class="ct-b4240c"> org.springframework.web.bind.annotation.GetMapping;</span></span><span class="line"><span class="ct-ec55a6">import</span><span class="ct-b4240c"> org.springframework.web.bind.annotation.RequestMapping;</span></span><span class="line"><span class="ct-ec55a6">import</span><span class="ct-b4240c"> org.springframework.web.bind.annotation.ResponseBody;</span></span><span class="line"><span class="ct-ec55a6">import</span><span class="ct-b4240c"> org.thymeleaf.TemplateEngine;</span></span><span class="line"><span class="ct-ec55a6">import</span><span class="ct-b4240c"> org.thymeleaf.context.Context;</span></span><span class="line"></span><span class="line"><span class="ct-ec55a6">import</span><span class="ct-b4240c"> javax.annotation.Resource;</span></span><span class="line"><span class="ct-ec55a6">import</span><span class="ct-b4240c"> javax.servlet.http.HttpSession;</span></span><span class="line"><span class="ct-ec55a6">import</span><span class="ct-b4240c"> java.io.*;</span></span><span class="line"><span class="ct-ec55a6">import</span><span class="ct-b4240c"> java.nio.file.Files;</span></span><span class="line"><span class="ct-ec55a6">import</span><span class="ct-b4240c"> java.nio.file.Paths;</span></span><span class="line"><span class="ct-ec55a6">import</span><span class="ct-b4240c"> java.util.HashMap;</span></span><span class="line"><span class="ct-ec55a6">import</span><span class="ct-b4240c"> java.util.Map;</span></span><span class="line"></span><span class="line"><span class="ct-b4240c">@</span><span class="ct-223862">Controller</span></span><span class="line"><span class="ct-b4240c">@</span><span class="ct-223862">RequestMapping</span><span class="ct-b4240c">(</span><span class="ct-1a6128">&quot;/test&quot;</span><span class="ct-b4240c">)</span></span><span class="line"><span class="ct-ec55a6">public</span><span class="ct-b4240c"> </span><span class="ct-ec55a6">class</span><span class="ct-b4240c"> </span><span class="ct-223862">TestController</span><span class="ct-b4240c"> {</span></span><span class="line"><span class="ct-b4240c">    @</span><span class="ct-223862">Resource</span></span><span class="line"><span class="ct-b4240c">    </span><span class="ct-ec55a6">private</span><span class="ct-b4240c"> </span><span class="ct-223862">TemplateEngine</span><span class="ct-b4240c"> </span><span class="ct-2b0fdd">templateEngine</span><span class="ct-b4240c">;</span></span><span class="line"></span><span class="line"><span class="ct-b4240c">    @</span><span class="ct-223862">GetMapping</span><span class="ct-b4240c">(</span><span class="ct-1a6128">&quot;pdf&quot;</span><span class="ct-b4240c">)</span></span><span class="line"><span class="ct-b4240c">    </span><span class="ct-ec55a6">public</span><span class="ct-b4240c"> </span><span class="ct-223862">void</span><span class="ct-b4240c"> </span><span class="ct-1eb62e">importPdf</span><span class="ct-b4240c">() </span><span class="ct-ec55a6">throws</span><span class="ct-b4240c"> </span><span class="ct-223862">IOException</span><span class="ct-b4240c">{</span></span><span class="line"><span class="ct-b4240c">        </span><span class="ct-223862">String</span><span class="ct-b4240c"> </span><span class="ct-2b0fdd">outputFolder</span><span class="ct-b4240c"> = </span><span class="ct-1a6128">&quot;C:</span><span class="ct-10739a">\\</span><span class="ct-1a6128">Users</span><span class="ct-10739a">\\</span><span class="ct-1a6128">你的用户名</span><span class="ct-10739a">\\</span><span class="ct-1a6128">Desktop</span><span class="ct-10739a">\\</span><span class="ct-1a6128">新建文件夹</span><span class="ct-10739a">\\</span><span class="ct-1a6128">test.pdf&quot;</span><span class="ct-b4240c">;</span></span><span class="line"><span class="ct-b4240c">        </span><span class="ct-223862">OutputStream</span><span class="ct-b4240c"> </span><span class="ct-2b0fdd">outputStream</span><span class="ct-b4240c"> = </span><span class="ct-2b0fdd">Files</span><span class="ct-b4240c">.</span><span class="ct-1eb62e">newOutputStream</span><span class="ct-b4240c">(</span><span class="ct-2b0fdd">Paths</span><span class="ct-b4240c">.</span><span class="ct-1eb62e">get</span><span class="ct-b4240c">(outputFolder));</span></span><span class="line"></span><span class="line"><span class="ct-b4240c">        </span><span class="ct-223862">Context</span><span class="ct-b4240c"> </span><span class="ct-2b0fdd">context</span><span class="ct-b4240c"> = </span><span class="ct-cef8ad">new</span><span class="ct-b4240c"> </span><span class="ct-1eb62e">Context</span><span class="ct-b4240c">();</span></span><span class="line"><span class="ct-b4240c">        </span><span class="ct-2b0fdd">context</span><span class="ct-b4240c">.</span><span class="ct-1eb62e">setVariable</span><span class="ct-b4240c">(</span><span class="ct-1a6128">&quot;sys&quot;</span><span class="ct-b4240c">, </span><span class="ct-1a6128">&quot;linux&quot;</span><span class="ct-b4240c">);</span></span><span class="line"></span><span class="line"><span class="ct-b4240c">        </span><span class="ct-223862">String</span><span class="ct-b4240c"> </span><span class="ct-2b0fdd">htmlStr</span><span class="ct-b4240c"> = </span><span class="ct-2b0fdd">templateEngine</span><span class="ct-b4240c">.</span><span class="ct-1eb62e">process</span><span class="ct-b4240c">(</span><span class="ct-1a6128">&quot;pdf&quot;</span><span class="ct-b4240c">, context);</span></span><span class="line"></span><span class="line"><span class="ct-b4240c">        </span><span class="ct-223862">ConverterProperties</span><span class="ct-b4240c"> </span><span class="ct-2b0fdd">properties</span><span class="ct-b4240c"> = </span><span class="ct-cef8ad">new</span><span class="ct-b4240c"> </span><span class="ct-1eb62e">ConverterProperties</span><span class="ct-b4240c">();</span></span><span class="line"><span class="ct-b4240c">        </span><span class="ct-223862">FontProvider</span><span class="ct-b4240c"> </span><span class="ct-2b0fdd">fontProvider</span><span class="ct-b4240c"> = </span><span class="ct-cef8ad">new</span><span class="ct-b4240c"> </span><span class="ct-1eb62e">DefaultFontProvider</span><span class="ct-b4240c">();</span></span><span class="line"><span class="ct-b4240c">        </span><span class="ct-223862">FontProgram</span><span class="ct-b4240c"> </span><span class="ct-2b0fdd">fontProgram</span><span class="ct-b4240c"> = </span><span class="ct-2b0fdd">FontProgramFactory</span><span class="ct-b4240c">.</span><span class="ct-1eb62e">createFont</span><span class="ct-b4240c">(</span><span class="ct-1a6128">&quot;font/cn.ttf&quot;</span><span class="ct-b4240c">);</span></span><span class="line"><span class="ct-b4240c">        </span><span class="ct-2b0fdd">fontProvider</span><span class="ct-b4240c">.</span><span class="ct-1eb62e">addFont</span><span class="ct-b4240c">(fontProgram);</span></span><span class="line"><span class="ct-b4240c">        </span><span class="ct-2b0fdd">properties</span><span class="ct-b4240c">.</span><span class="ct-1eb62e">setFontProvider</span><span class="ct-b4240c">(fontProvider);</span></span><span class="line"></span><span class="line"><span class="ct-b4240c">        </span><span class="ct-2b0fdd">HtmlConverter</span><span class="ct-b4240c">.</span><span class="ct-1eb62e">convertToPdf</span><span class="ct-b4240c">(htmlStr, outputStream, properties);</span></span><span class="line"><span class="ct-b4240c">    }</span></span><span class="line"></span><span class="line"><span class="ct-b4240c">}</span></span><span class="line"></span></code></pre><!--]--><h2 id="注意"><a href="#注意"><!--[-->注意<!--]--></a></h2><h4 id="如果生成-html-字符串时报-javalangclassnotfoundexception-ognldefaultmemberaccess-异常"><a href="#如果生成-html-字符串时报-javalangclassnotfoundexception-ognldefaultmemberaccess-异常"><!--[-->如果生成 Html 字符串时报 【java.lang.ClassNotFoundException: ognl.DefaultMemberAccess】 异常<!--]--></a></h4><!--[--><pre><code><span class="line"><span class="ct-e8330a">&lt;!--添加这个依赖即可--&gt;</span></span><span class="line"><span class="ct-e8330a">&lt;!--而且最好是3.1.x版本，不然也报错--&gt;</span></span><span class="line"><span class="ct-11c0fd">&lt;</span><span class="ct-ec55a6">dependency</span><span class="ct-11c0fd">&gt;</span></span><span class="line"><span class="ct-b4240c">    </span><span class="ct-11c0fd">&lt;</span><span class="ct-ec55a6">groupId</span><span class="ct-11c0fd">&gt;</span><span class="ct-b4240c">com.itextpdf</span><span class="ct-11c0fd">&lt;/</span><span class="ct-ec55a6">groupId</span><span class="ct-11c0fd">&gt;</span></span><span class="line"><span class="ct-b4240c">    </span><span class="ct-11c0fd">&lt;</span><span class="ct-ec55a6">artifactId</span><span class="ct-11c0fd">&gt;</span><span class="ct-b4240c">html2pdf</span><span class="ct-11c0fd">&lt;/</span><span class="ct-ec55a6">artifactId</span><span class="ct-11c0fd">&gt;</span></span><span class="line"><span class="ct-b4240c">    </span><span class="ct-11c0fd">&lt;</span><span class="ct-ec55a6">version</span><span class="ct-11c0fd">&gt;</span><span class="ct-b4240c">4.0.2</span><span class="ct-11c0fd">&lt;/</span><span class="ct-ec55a6">version</span><span class="ct-11c0fd">&gt;</span></span><span class="line"><span class="ct-11c0fd">&lt;/</span><span class="ct-ec55a6">dependency</span><span class="ct-11c0fd">&gt;</span></span></code></pre><!--]--><h2 id="pdf-效果"><a href="#pdf-效果"><!--[-->Pdf 效果<!--]--></a></h2><p><!--[--><img src="https://img-blog.csdnimg.cn/fd20a260902b491c88fdd1fb1201321f.png" alt="在这里插入图片描述"><!--]--></p><style>.ct-cef8ad{color:#C586C0}
.ct-1eb62e{color:#DCDCAA}
.ct-223862{color:#4EC9B0}
.ct-11b34c{color:#F44747}
.ct-10739a{color:#D7BA7D}
.ct-2b0fdd{color:#9CDCFE}
.ct-1a6128{color:#CE9178}
.ct-b4240c{color:#D4D4D4}
.ct-ec55a6{color:#569CD6}
.ct-11c0fd{color:#808080}
.ct-e8330a{color:#6A9955}</style></div><!--]--></div><!--]--></main></div><!--]--></div><script type="module">import p from "/blank-blog/articles/0005/_payload.js";window.__NUXT__={...p,...((function(a,b,c){return {state:{},_errors:{},serverRendered:c,config:{public:{content:{locales:[],defaultLocale:a,integrity:1678889862044,experimental:{stripQueryParameters:b,clientDB:b},api:{baseURL:"\u002Fapi\u002F_content"},navigation:{fields:[]},tags:{p:"prose-p",a:"prose-a",blockquote:"prose-blockquote","code-inline":"prose-code-inline",code:"prose-code",em:"prose-em",h1:"prose-h1",h2:"prose-h2",h3:"prose-h3",h4:"prose-h4",h5:"prose-h5",h6:"prose-h6",hr:"prose-hr",img:"prose-img",ul:"prose-ul",ol:"prose-ol",li:"prose-li",strong:"prose-strong",table:"prose-table",thead:"prose-thead",tbody:"prose-tbody",td:"prose-td",th:"prose-th",tr:"prose-tr"},highlight:c,wsUrl:a,documentDriven:b,host:a,trailingSlash:b,anchorLinks:{depth:4,exclude:[1]}}},app:{baseURL:"\u002Fblank-blog",buildAssetsDir:"\u002F_nuxt\u002F",cdnURL:a}},prerenderedAt:1678889873755}}("",false,true)))}</script><script type="module" src="/blank-blog/_nuxt/entry.11c2c7bc.js" crossorigin></script><script type="module" src="/blank-blog/_nuxt/AppNavSearch.327fd0f2.js" crossorigin></script><script type="module" src="/blank-blog/_nuxt/AppSidebar.8a397fa0.js" crossorigin></script><script type="module" src="/blank-blog/_nuxt/_...slug_.f10337fc.js" crossorigin></script><script type="module" src="/blank-blog/_nuxt/ContentDoc.faef5b28.js" crossorigin></script><script type="module" src="/blank-blog/_nuxt/ContentRenderer.f9f20a3e.js" crossorigin></script><script type="module" src="/blank-blog/_nuxt/ContentRendererMarkdown.b58f01b7.js" crossorigin></script><script type="module" src="/blank-blog/_nuxt/ProseH1.2c5614c1.js" crossorigin></script><script type="module" src="/blank-blog/_nuxt/ProseH2.6ae363b9.js" crossorigin></script><script type="module" src="/blank-blog/_nuxt/ProseP.b5b56fa7.js" crossorigin></script><script type="module" src="/blank-blog/_nuxt/ProseCode.ef8fc51b.js" crossorigin></script><script type="module" src="/blank-blog/_nuxt/ProseH4.3bc1ad69.js" crossorigin></script><script type="module" src="/blank-blog/_nuxt/ProseStrong.c45690af.js" crossorigin></script><script type="module" src="/blank-blog/_nuxt/ProseImg.acced2af.js" crossorigin></script></body>
</html>