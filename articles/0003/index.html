<!DOCTYPE html>
<html >
<head><meta charset="utf-8">
<title>Compose 音量控制</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="og:title" content="Compose 音量控制"><link rel="modulepreload" href="/blank-blog/articles/0003/_payload.js"><link rel="modulepreload" as="script" crossorigin href="/blank-blog/_nuxt/entry.67f4dc95.js"><link rel="preload" as="style" href="/blank-blog/_nuxt/entry.eda73552.css"><link rel="modulepreload" as="script" crossorigin href="/blank-blog/_nuxt/app.config.0fcc39f2.js"><link rel="modulepreload" as="script" crossorigin href="/blank-blog/_nuxt/AppSidebar.c731ae51.js"><link rel="modulepreload" as="script" crossorigin href="/blank-blog/_nuxt/_...slug_.84bada0c.js"><link rel="modulepreload" as="script" crossorigin href="/blank-blog/_nuxt/ContentDoc.e70dbd5b.js"><link rel="modulepreload" as="script" crossorigin href="/blank-blog/_nuxt/composables.98ebe13e.js"><link rel="modulepreload" as="script" crossorigin href="/blank-blog/_nuxt/ContentRenderer.d9d7f64a.js"><link rel="modulepreload" as="script" crossorigin href="/blank-blog/_nuxt/ContentRendererMarkdown.c6f7b71b.js"><link rel="modulepreload" as="script" crossorigin href="/blank-blog/_nuxt/index.a6ef77ff.js"><link rel="modulepreload" as="script" crossorigin href="/blank-blog/_nuxt/ContentQuery.16404858.js"><link rel="modulepreload" as="script" crossorigin href="/blank-blog/_nuxt/query.f0301d70.js"><link rel="modulepreload" as="script" crossorigin href="/blank-blog/_nuxt/cookie.e0ac3f3f.js"><link rel="modulepreload" as="script" crossorigin href="/blank-blog/_nuxt/query.c3f7607a.js"><link rel="modulepreload" as="script" crossorigin href="/blank-blog/_nuxt/utils.7d7aa35a.js"><link rel="modulepreload" as="script" crossorigin href="/blank-blog/_nuxt/ProseH1.b809df00.js"><link rel="modulepreload" as="script" crossorigin href="/blank-blog/_nuxt/ProseCode.1351faa6.js"><link rel="prefetch" as="image" type="image/png" href="/blank-blog/_nuxt/logo.a48fd503.png"><link rel="prefetch" as="script" crossorigin href="/blank-blog/_nuxt/error-component.6418a3a3.js"><link rel="stylesheet" href="/blank-blog/_nuxt/entry.eda73552.css"><style>*{margin:0;padding:0}body{background-color:#f3f3f3;overflow:hidden}div.app-container{display:flex;justify-content:center}.app-sidebar{margin:20px 20px 0 0}main{margin-top:20px;width:800px}</style><style>header{align-items:center;background-color:#fff;display:flex;height:60px;justify-content:center}</style><style>.app-nav-search{background:#f3f3f3;border-radius:10px;color:rgba(40,40,40,.8);font-size:20px;font-weight:600;height:38px;left:476px;line-height:38px;text-align:center;top:11px;width:436px}</style><style>.app-sidebar{width:280px}.app-sidebar .sidebar-block{background-color:#fff;border-radius:10px;box-sizing:border-box;margin-bottom:20px;min-height:100px;padding:20px;width:100%}.app-sidebar>.user-block .my{align-items:center;display:flex;justify-content:space-evenly;margin-bottom:20px}.app-sidebar>.user-block .my img{height:56px;width:56px}.app-sidebar>.user-block .my div{text-align:center}.app-sidebar>.user-block .my div h3{color:#282828;font-size:20px;font-weight:600}.app-sidebar>.user-block .my div h5{color:rgba(40,40,40,.6);font-size:14px;font-weight:400}.app-sidebar>.user-block .links{display:flex;justify-content:space-evenly;list-style:none}.app-sidebar>.user-block .links .link{color:rgba(40,40,40,.6);font-size:14px;font-weight:400;text-decoration-line:underline}.app-sidebar>.tag-block h2{color:#282828;font-size:20px;font-weight:600;text-align:center}.app-sidebar>.tag-block .tags{display:flex;flex-wrap:wrap;list-style:none}.app-sidebar>.tag-block .tags .tag{color:rgba(40,40,40,.6);font-size:14px;font-weight:400;line-height:24px;margin-right:10px;text-decoration-line:underline}</style><style>.article-container{background-color:#fff;border-radius:10px;box-sizing:border-box;padding:10px}</style><style>pre code .line{display:block;min-height:1rem}</style></head>
<body ><div id="__nuxt"><!--[--><header class="app-nav"><div class="app-nav-search">搜索</div></header><div class="app-container"><aside class="app-sidebar"><section style="" class="sidebar-block"><span>返回</span></section><section class="user-block sidebar-block"><div class="my"><img src="/blank-blog/_nuxt/logo.a48fd503.png" alt="logo"><div><h3>嘎嘣脆</h3><h5>“努力，奋斗”</h5></div></div><ul class="links"><!--[--><li class="link">邮箱</li><li class="link">GitHub</li><li class="link">BiliBili</li><!--]--></ul></section><section class="tag-block sidebar-block"><h2>标签</h2><ul class="tags"><!--[--><li class="tag">#JavaScript(20)</li><li class="tag">#SpringBoot(2)</li><li class="tag">#NuxtJs(6)</li><li class="tag">#Mysql(4)</li><li class="tag">#Java(9)</li><li class="tag">#Flutter(10)</li><!--]--></ul></section></aside><main><!--[--><div class="article-container"><!--[--><div><h1 id="compose-音量控制"><!--[-->Compose 音量控制<!--]--></h1><!--[--><pre><code><span class="line"><span class="ct-44c6b8">val</span><span class="ct-e8967c"> context = </span><span class="ct-0b81bb">LocalContext</span><span class="ct-e8967c">.current</span></span><span class="line"><span class="ct-e8967c">    </span><span class="ct-44c6b8">val</span><span class="ct-e8967c"> audioManager = context.getSystemService&lt;</span><span class="ct-0b81bb">AudioManager</span><span class="ct-e8967c">&gt;()</span></span><span class="line"><span class="ct-e8967c">    </span><span class="ct-6e2b0f">// 获取最大音量</span></span><span class="line"><span class="ct-e8967c">    </span><span class="ct-44c6b8">val</span><span class="ct-e8967c"> maxVolume = audio</span><span class="ct-0b81bb">Manager?</span><span class="ct-e8967c">.getStreamMaxVolume(</span><span class="ct-0b81bb">AudioManager</span><span class="ct-e8967c">.</span><span class="ct-0b81bb">STREAM_MUSIC</span><span class="ct-e8967c">)</span></span><span class="line"><span class="ct-e8967c">    </span><span class="ct-ab0451">println</span><span class="ct-e8967c">(</span><span class="ct-fef4d6">&quot;最大音量：&quot;</span><span class="ct-e8967c"> + maxVolume)</span></span><span class="line"></span><span class="line"><span class="ct-e8967c">    </span><span class="ct-44c6b8">var</span><span class="ct-e8967c"> currenVolume by remember {</span></span><span class="line"><span class="ct-e8967c">        mutableStateOf(audio</span><span class="ct-0b81bb">Manager?</span><span class="ct-e8967c">.getStreamVolume(</span><span class="ct-0b81bb">AudioManager</span><span class="ct-e8967c">.</span><span class="ct-0b81bb">STREAM_MUSIC</span><span class="ct-e8967c">)!!.toFloat())</span></span><span class="line"><span class="ct-e8967c">    }</span></span><span class="line"></span><span class="line"><span class="ct-e8967c">    </span><span class="ct-0b81bb">Column</span><span class="ct-e8967c">(</span></span><span class="line"><span class="ct-e8967c">        horizontalAlignment = </span><span class="ct-0b81bb">Alignment</span><span class="ct-e8967c">.</span><span class="ct-0b81bb">CenterHorizontally</span><span class="ct-e8967c">,</span></span><span class="line"><span class="ct-e8967c">        verticalArrangement = </span><span class="ct-0b81bb">Arrangement</span><span class="ct-e8967c">.</span><span class="ct-0b81bb">Center</span><span class="ct-e8967c">,</span></span><span class="line"><span class="ct-e8967c">        modifier = </span><span class="ct-0b81bb">Modifier</span></span><span class="line"><span class="ct-e8967c">            .fillMaxWidth()</span></span><span class="line"><span class="ct-e8967c">            .fillMaxHeight()</span></span><span class="line"><span class="ct-e8967c">    ) {</span></span><span class="line"><span class="ct-e8967c">        </span><span class="ct-0b81bb">Text</span><span class="ct-e8967c">(text = </span><span class="ct-fef4d6">&quot;asd:$currenVolume&quot;</span><span class="ct-e8967c">)</span></span><span class="line"><span class="ct-e8967c">        </span><span class="ct-0b81bb">Slider</span><span class="ct-e8967c">(</span></span><span class="line"><span class="ct-e8967c">            value = currenVolume,</span></span><span class="line"><span class="ct-e8967c">            valueRange = </span><span class="ct-a1f181">0f</span><span class="ct-e8967c">..</span><span class="ct-a1f181">15f</span><span class="ct-e8967c">,</span></span><span class="line"><span class="ct-e8967c">            steps = </span><span class="ct-a1f181">15</span><span class="ct-e8967c">,</span></span><span class="line"><span class="ct-e8967c">            onValueChange = {</span></span><span class="line"><span class="ct-e8967c">                currenVolume = it</span></span><span class="line"><span class="ct-e8967c">                </span><span class="ct-ab0451">println</span><span class="ct-e8967c">(it.toInt())</span></span><span class="line"></span><span class="line"><span class="ct-e8967c">                audio</span><span class="ct-0b81bb">Manager?</span><span class="ct-e8967c">.setStreamVolume(</span><span class="ct-0b81bb">AudioManager</span><span class="ct-e8967c">.</span><span class="ct-0b81bb">STREAM_MUSIC</span><span class="ct-e8967c">, it.toInt(), </span><span class="ct-a1f181">2</span><span class="ct-e8967c">)</span><span class="ct-6e2b0f">// flags参数：0无效、1显示控制、2隐式控制</span></span><span class="line"><span class="ct-e8967c">            },</span></span><span class="line"><span class="ct-e8967c">            colors = </span><span class="ct-0b81bb">SliderDefaults</span><span class="ct-e8967c">.colors(</span></span><span class="line"><span class="ct-e8967c">                inactiveTickColor = </span><span class="ct-0b81bb">Color</span><span class="ct-e8967c">.</span><span class="ct-0b81bb">Transparent</span><span class="ct-e8967c">,</span></span><span class="line"><span class="ct-e8967c">                activeTickColor = </span><span class="ct-0b81bb">Color</span><span class="ct-e8967c">.</span><span class="ct-0b81bb">Transparent</span></span><span class="line"><span class="ct-e8967c">            ),</span></span><span class="line"><span class="ct-e8967c">            modifier = </span><span class="ct-0b81bb">Modifier</span></span><span class="line"><span class="ct-e8967c">                .width(</span><span class="ct-a1f181">200</span><span class="ct-e8967c">.dp)</span></span><span class="line"><span class="ct-e8967c">                .fillMaxHeight()</span></span><span class="line"><span class="ct-e8967c">        )</span></span><span class="line"><span class="ct-e8967c">    }</span></span></code></pre><!--]--><style>.ct-a1f181{color:#B5CEA8}
.ct-fef4d6{color:#CE9178}
.ct-ab0451{color:#DCDCAA}
.ct-6e2b0f{color:#6A9955}
.ct-0b81bb{color:#4EC9B0}
.ct-e8967c{color:#D4D4D4}
.ct-44c6b8{color:#569CD6}</style></div><!--]--></div><!--]--></main></div><!--]--></div><script type="module">import p from "/blank-blog/articles/0003/_payload.js";window.__NUXT__={...p,...((function(a,b,c){return {state:{},_errors:{},serverRendered:c,config:{public:{content:{locales:[],defaultLocale:a,integrity:1677163656222,experimental:{stripQueryParameters:b,clientDB:b},api:{baseURL:"\u002Fapi\u002F_content"},navigation:{fields:[]},tags:{p:"prose-p",a:"prose-a",blockquote:"prose-blockquote","code-inline":"prose-code-inline",code:"prose-code",em:"prose-em",h1:"prose-h1",h2:"prose-h2",h3:"prose-h3",h4:"prose-h4",h5:"prose-h5",h6:"prose-h6",hr:"prose-hr",img:"prose-img",ul:"prose-ul",ol:"prose-ol",li:"prose-li",strong:"prose-strong",table:"prose-table",thead:"prose-thead",tbody:"prose-tbody",td:"prose-td",th:"prose-th",tr:"prose-tr"},highlight:c,wsUrl:a,documentDriven:b,host:a,trailingSlash:b,anchorLinks:{depth:4,exclude:[1]}}},app:{baseURL:"\u002Fblank-blog",buildAssetsDir:"\u002F_nuxt\u002F",cdnURL:a}},prerenderedAt:1677163667438}}("",false,true)))}</script><script type="module" src="/blank-blog/_nuxt/entry.67f4dc95.js" crossorigin></script><script type="module" src="/blank-blog/_nuxt/AppSidebar.c731ae51.js" crossorigin></script><script type="module" src="/blank-blog/_nuxt/_...slug_.84bada0c.js" crossorigin></script><script type="module" src="/blank-blog/_nuxt/ContentDoc.e70dbd5b.js" crossorigin></script><script type="module" src="/blank-blog/_nuxt/ContentRenderer.d9d7f64a.js" crossorigin></script><script type="module" src="/blank-blog/_nuxt/ContentRendererMarkdown.c6f7b71b.js" crossorigin></script><script type="module" src="/blank-blog/_nuxt/ProseH1.b809df00.js" crossorigin></script><script type="module" src="/blank-blog/_nuxt/ProseCode.1351faa6.js" crossorigin></script></body>
</html>