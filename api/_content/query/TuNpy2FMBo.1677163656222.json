{"_path":"/articles/0003","_dir":"articles","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Compose 音量控制","description":"","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"compose-音量控制"},"children":[{"type":"text","value":"Compose 音量控制"}]},{"type":"element","tag":"code","props":{"code":"val context = LocalContext.current\r\n    val audioManager = context.getSystemService<AudioManager>()\r\n    // 获取最大音量\r\n    val maxVolume = audioManager?.getStreamMaxVolume(AudioManager.STREAM_MUSIC)\r\n    println(\"最大音量：\" + maxVolume)\r\n\r\n    var currenVolume by remember {\r\n        mutableStateOf(audioManager?.getStreamVolume(AudioManager.STREAM_MUSIC)!!.toFloat())\r\n    }\r\n\r\n    Column(\r\n        horizontalAlignment = Alignment.CenterHorizontally,\r\n        verticalArrangement = Arrangement.Center,\r\n        modifier = Modifier\r\n            .fillMaxWidth()\r\n            .fillMaxHeight()\r\n    ) {\r\n        Text(text = \"asd:$currenVolume\")\r\n        Slider(\r\n            value = currenVolume,\r\n            valueRange = 0f..15f,\r\n            steps = 15,\r\n            onValueChange = {\r\n                currenVolume = it\r\n                println(it.toInt())\r\n\r\n                audioManager?.setStreamVolume(AudioManager.STREAM_MUSIC, it.toInt(), 2)// flags参数：0无效、1显示控制、2隐式控制\r\n            },\r\n            colors = SliderDefaults.colors(\r\n                inactiveTickColor = Color.Transparent,\r\n                activeTickColor = Color.Transparent\r\n            ),\r\n            modifier = Modifier\r\n                .width(200.dp)\r\n                .fillMaxHeight()\r\n        )\r\n    }\n","language":"kotlin","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b0de8f"},"children":[{"type":"text","value":"val"}]},{"type":"element","tag":"span","props":{"class":"ct-1044b0"},"children":[{"type":"text","value":" context = "}]},{"type":"element","tag":"span","props":{"class":"ct-ea8764"},"children":[{"type":"text","value":"LocalContext"}]},{"type":"element","tag":"span","props":{"class":"ct-1044b0"},"children":[{"type":"text","value":".current"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1044b0"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-b0de8f"},"children":[{"type":"text","value":"val"}]},{"type":"element","tag":"span","props":{"class":"ct-1044b0"},"children":[{"type":"text","value":" audioManager = context.getSystemService<"}]},{"type":"element","tag":"span","props":{"class":"ct-ea8764"},"children":[{"type":"text","value":"AudioManager"}]},{"type":"element","tag":"span","props":{"class":"ct-1044b0"},"children":[{"type":"text","value":">()"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1044b0"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-7f33db"},"children":[{"type":"text","value":"// 获取最大音量"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1044b0"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-b0de8f"},"children":[{"type":"text","value":"val"}]},{"type":"element","tag":"span","props":{"class":"ct-1044b0"},"children":[{"type":"text","value":" maxVolume = audio"}]},{"type":"element","tag":"span","props":{"class":"ct-ea8764"},"children":[{"type":"text","value":"Manager?"}]},{"type":"element","tag":"span","props":{"class":"ct-1044b0"},"children":[{"type":"text","value":".getStreamMaxVolume("}]},{"type":"element","tag":"span","props":{"class":"ct-ea8764"},"children":[{"type":"text","value":"AudioManager"}]},{"type":"element","tag":"span","props":{"class":"ct-1044b0"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-ea8764"},"children":[{"type":"text","value":"STREAM_MUSIC"}]},{"type":"element","tag":"span","props":{"class":"ct-1044b0"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1044b0"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-5f0da1"},"children":[{"type":"text","value":"println"}]},{"type":"element","tag":"span","props":{"class":"ct-1044b0"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-9ddc1d"},"children":[{"type":"text","value":"\"最大音量：\""}]},{"type":"element","tag":"span","props":{"class":"ct-1044b0"},"children":[{"type":"text","value":" + maxVolume)"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1044b0"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-b0de8f"},"children":[{"type":"text","value":"var"}]},{"type":"element","tag":"span","props":{"class":"ct-1044b0"},"children":[{"type":"text","value":" currenVolume by remember {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1044b0"},"children":[{"type":"text","value":"        mutableStateOf(audio"}]},{"type":"element","tag":"span","props":{"class":"ct-ea8764"},"children":[{"type":"text","value":"Manager?"}]},{"type":"element","tag":"span","props":{"class":"ct-1044b0"},"children":[{"type":"text","value":".getStreamVolume("}]},{"type":"element","tag":"span","props":{"class":"ct-ea8764"},"children":[{"type":"text","value":"AudioManager"}]},{"type":"element","tag":"span","props":{"class":"ct-1044b0"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-ea8764"},"children":[{"type":"text","value":"STREAM_MUSIC"}]},{"type":"element","tag":"span","props":{"class":"ct-1044b0"},"children":[{"type":"text","value":")!!.toFloat())"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1044b0"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1044b0"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-ea8764"},"children":[{"type":"text","value":"Column"}]},{"type":"element","tag":"span","props":{"class":"ct-1044b0"},"children":[{"type":"text","value":"("}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1044b0"},"children":[{"type":"text","value":"        horizontalAlignment = "}]},{"type":"element","tag":"span","props":{"class":"ct-ea8764"},"children":[{"type":"text","value":"Alignment"}]},{"type":"element","tag":"span","props":{"class":"ct-1044b0"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-ea8764"},"children":[{"type":"text","value":"CenterHorizontally"}]},{"type":"element","tag":"span","props":{"class":"ct-1044b0"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1044b0"},"children":[{"type":"text","value":"        verticalArrangement = "}]},{"type":"element","tag":"span","props":{"class":"ct-ea8764"},"children":[{"type":"text","value":"Arrangement"}]},{"type":"element","tag":"span","props":{"class":"ct-1044b0"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-ea8764"},"children":[{"type":"text","value":"Center"}]},{"type":"element","tag":"span","props":{"class":"ct-1044b0"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1044b0"},"children":[{"type":"text","value":"        modifier = "}]},{"type":"element","tag":"span","props":{"class":"ct-ea8764"},"children":[{"type":"text","value":"Modifier"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1044b0"},"children":[{"type":"text","value":"            .fillMaxWidth()"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1044b0"},"children":[{"type":"text","value":"            .fillMaxHeight()"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1044b0"},"children":[{"type":"text","value":"    ) {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1044b0"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-ea8764"},"children":[{"type":"text","value":"Text"}]},{"type":"element","tag":"span","props":{"class":"ct-1044b0"},"children":[{"type":"text","value":"(text = "}]},{"type":"element","tag":"span","props":{"class":"ct-9ddc1d"},"children":[{"type":"text","value":"\"asd:$currenVolume\""}]},{"type":"element","tag":"span","props":{"class":"ct-1044b0"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1044b0"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-ea8764"},"children":[{"type":"text","value":"Slider"}]},{"type":"element","tag":"span","props":{"class":"ct-1044b0"},"children":[{"type":"text","value":"("}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1044b0"},"children":[{"type":"text","value":"            value = currenVolume,"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1044b0"},"children":[{"type":"text","value":"            valueRange = "}]},{"type":"element","tag":"span","props":{"class":"ct-715715"},"children":[{"type":"text","value":"0f"}]},{"type":"element","tag":"span","props":{"class":"ct-1044b0"},"children":[{"type":"text","value":".."}]},{"type":"element","tag":"span","props":{"class":"ct-715715"},"children":[{"type":"text","value":"15f"}]},{"type":"element","tag":"span","props":{"class":"ct-1044b0"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1044b0"},"children":[{"type":"text","value":"            steps = "}]},{"type":"element","tag":"span","props":{"class":"ct-715715"},"children":[{"type":"text","value":"15"}]},{"type":"element","tag":"span","props":{"class":"ct-1044b0"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1044b0"},"children":[{"type":"text","value":"            onValueChange = {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1044b0"},"children":[{"type":"text","value":"                currenVolume = it"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1044b0"},"children":[{"type":"text","value":"                "}]},{"type":"element","tag":"span","props":{"class":"ct-5f0da1"},"children":[{"type":"text","value":"println"}]},{"type":"element","tag":"span","props":{"class":"ct-1044b0"},"children":[{"type":"text","value":"(it.toInt())"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1044b0"},"children":[{"type":"text","value":"                audio"}]},{"type":"element","tag":"span","props":{"class":"ct-ea8764"},"children":[{"type":"text","value":"Manager?"}]},{"type":"element","tag":"span","props":{"class":"ct-1044b0"},"children":[{"type":"text","value":".setStreamVolume("}]},{"type":"element","tag":"span","props":{"class":"ct-ea8764"},"children":[{"type":"text","value":"AudioManager"}]},{"type":"element","tag":"span","props":{"class":"ct-1044b0"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-ea8764"},"children":[{"type":"text","value":"STREAM_MUSIC"}]},{"type":"element","tag":"span","props":{"class":"ct-1044b0"},"children":[{"type":"text","value":", it.toInt(), "}]},{"type":"element","tag":"span","props":{"class":"ct-715715"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-1044b0"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"class":"ct-7f33db"},"children":[{"type":"text","value":"// flags参数：0无效、1显示控制、2隐式控制"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1044b0"},"children":[{"type":"text","value":"            },"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1044b0"},"children":[{"type":"text","value":"            colors = "}]},{"type":"element","tag":"span","props":{"class":"ct-ea8764"},"children":[{"type":"text","value":"SliderDefaults"}]},{"type":"element","tag":"span","props":{"class":"ct-1044b0"},"children":[{"type":"text","value":".colors("}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1044b0"},"children":[{"type":"text","value":"                inactiveTickColor = "}]},{"type":"element","tag":"span","props":{"class":"ct-ea8764"},"children":[{"type":"text","value":"Color"}]},{"type":"element","tag":"span","props":{"class":"ct-1044b0"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-ea8764"},"children":[{"type":"text","value":"Transparent"}]},{"type":"element","tag":"span","props":{"class":"ct-1044b0"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1044b0"},"children":[{"type":"text","value":"                activeTickColor = "}]},{"type":"element","tag":"span","props":{"class":"ct-ea8764"},"children":[{"type":"text","value":"Color"}]},{"type":"element","tag":"span","props":{"class":"ct-1044b0"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-ea8764"},"children":[{"type":"text","value":"Transparent"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1044b0"},"children":[{"type":"text","value":"            ),"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1044b0"},"children":[{"type":"text","value":"            modifier = "}]},{"type":"element","tag":"span","props":{"class":"ct-ea8764"},"children":[{"type":"text","value":"Modifier"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1044b0"},"children":[{"type":"text","value":"                .width("}]},{"type":"element","tag":"span","props":{"class":"ct-715715"},"children":[{"type":"text","value":"200"}]},{"type":"element","tag":"span","props":{"class":"ct-1044b0"},"children":[{"type":"text","value":".dp)"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1044b0"},"children":[{"type":"text","value":"                .fillMaxHeight()"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1044b0"},"children":[{"type":"text","value":"        )"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1044b0"},"children":[{"type":"text","value":"    }"}]}]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-715715{color:#B5CEA8}\n.ct-9ddc1d{color:#CE9178}\n.ct-5f0da1{color:#DCDCAA}\n.ct-7f33db{color:#6A9955}\n.ct-ea8764{color:#4EC9B0}\n.ct-1044b0{color:#D4D4D4}\n.ct-b0de8f{color:#569CD6}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:articles:0003.md","_source":"content","_file":"articles/0003.md","_extension":"md"}